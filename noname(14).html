<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image Compressor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f2f2f2;
}
header{
  background:#111;
  color:#fff;
  padding:15px;
  text-align:center;
  font-size:20px;
}
.box{
  background:#fff;
  margin:20px;
  padding:20px;
  border-radius:10px;
  text-align:center;
}
input[type="file"]{
  margin:15px 0;
}
input[type="range"]{
  width:100%;
}
button{
  margin-top:15px;
  padding:10px 20px;
  border:none;
  background:#007bff;
  color:#fff;
  border-radius:6px;
  cursor:pointer;
}
img{
  max-width:100%;
  margin-top:15px;
  border-radius:8px;
}
.size{
  margin-top:10px;
  font-size:14px;
  color:#333;
}
</style>
</head>

<body>

<header>Image Compressor</header>

<div class="box">
  <input type="file" id="upload" accept="image/*"><br>

  <label>Quality: <span id="qualityValue">70</span>%</label>
  <input type="range" min="10" max="100" value="70" id="quality">

  <button onclick="compressImage()">Compress Image</button>

  <div class="size" id="originalSize"></div>
  <img id="preview">
  <div class="size" id="compressedSize"></div>

  <a id="download" download="compressed.jpg"></a>
</div>

<script>
let upload = document.getElementById("upload");
let quality = document.getElementById("quality");
let qualityValue = document.getElementById("qualityValue");

quality.oninput = () => {
  qualityValue.innerText = quality.value;
};

function compressImage(){
  let file = upload.files[0];
  if(!file){
    alert("Image select karo");
    return;
  }

  document.getElementById("originalSize").innerText =
    "Original Size: " + (file.size/1024).toFixed(2) + " KB";

  let reader = new FileReader();
  reader.readAsDataURL(file);

  reader.onload = function(e){
    let img = new Image();
    img.src = e.target.result;

    img.onload = function(){
      let canvas = document.createElement("canvas");
      let ctx = canvas.getContext("2d");

      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img,0,0);

      canvas.toBlob(function(blob){
        let url = URL.createObjectURL(blob);

        document.getElementById("preview").src = url;
        document.getElementById("compressedSize").innerText =
          "Compressed Size: " + (blob.size/1024).toFixed(2) + " KB";

        let download = document.getElementById("download");
        download.href = url;
        download.innerText = "⬇️ Download Compressed Image";
      },"image/jpeg", quality.value/100);
    };
  };
}
</script>

</body>
</html>
<p id="originalSize"></p>
<img id="preview">
<p id="compressedSize"></p>

<a id="download" download="compressed.jpg"></a>
<script>
function compressImage(){
  let file = document.getElementById("upload").files[0];
  if(!file){
    alert("Please select an image");
    return;
  }

  document.getElementById("originalSize").innerText =
    "Original Size: " + (file.size/1024).toFixed(2) + " KB";

  let reader = new FileReader();
  reader.readAsDataURL(file);

  reader.onload = function(e){
    let img = new Image();
    img.src = e.target.result;

    img.onload = function(){
      let canvas = document.createElement("canvas");
      let ctx = canvas.getContext("2d");

      canvas.width = img.width;
      canvas.height = img.height;
      ctx.drawImage(img,0,0);

      canvas.toBlob(function(blob){
        let url = URL.createObjectURL(blob);

        document.getElementById("preview").src = url;
        document.getElementById("compressedSize").innerText =
          "Compressed Size: " + (blob.size/1024).toFixed(2) + " KB";

        let download = document.getElementById("download");
        download.href = url;
        download.innerText = "⬇️ Download Compressed Image";
      },"image/jpeg", document.getElementById("quality").value/100);
    };
  };
}
</script>
<script>
let originalImage = null;

document.getElementById("imageInput").addEventListener("change", function (e) {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = function () {
    originalImage = new Image();
    originalImage.src = reader.result;

    document.getElementById("preview").src = reader.result;
    document.getElementById("preview").style.display = "block";
    document.getElementById("removeBtn").style.display = "inline-block";
  };
  reader.readAsDataURL(file);
});

document.getElementById("quality").addEventListener("input", function () {
  document.getElementById("qualityValue").innerText = this.value;
});

function compressImage() {
  if (!originalImage) {
    alert("Please select an image");
    return;
  }

  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");

  canvas.width = originalImage.width;
  canvas.height = originalImage.height;
  ctx.drawImage(originalImage, 0, 0);

  const quality = document.getElementById("quality").value / 100;
  const compressedData = canvas.toDataURL("image/jpeg", quality);

  const downloadLink = document.getElementById("download");
  downloadLink.href = compressedData;
  downloadLink.download = "compressed-image.jpg";
  downloadLink.style.display = "inline-block";
  downloadLink.innerText = "Download Image";
}

function removeImage() {
  document.getElementById("imageInput").value = "";
  document.getElementById("preview").style.display = "none";
  document.getElementById("download").style.display = "none";
  document.getElementById("removeBtn").style.display = "none";
  originalImage = null;
}
</script>
<button id="removeBtn" onclick="removeImage()" style="display:none;">
  Remove Image
  <script>
  let img = new Image();
  
  document.getElementById("imageInput").addEventListener("change", function(e){
  const file = e.target.files[0];
  if(!file) return;
  
  const reader = new FileReader();
  reader.onload = function(){
  img.src = reader.result;
  document.getElementById("removeBtn").style.display = "block";
  };
  reader.readAsDataURL(file);
  });
  
  function removeImage(){
  document.getElementById("imageInput").value = "";
  document.getElementById("removeBtn").style.display = "none";
  }
  </script>
  <div class="info-box">
  <h2>About Image Compressor</h2>
  <p>
  Image Compressor ek free online tool hai jisse aap JPG aur PNG images
  ka size kam kar sakte hain bina quality zyada lose kiye.
  Ye tool browser me hi kaam karta hai, aapki images kahin upload nahi hoti.
  </p>
  </div>